version: '3.8'

services:
  mysql-mailcow:
    image: mariadb:10.6
    container_name: mysql-mailcow
    restart: always
    env_file:
      - mailcow.conf
    environment:
      - MYSQL_ROOT_PASSWORD=${DBROOT}
      - MYSQL_DATABASE=mailcow
      - MYSQL_USER=mailcow
      - MYSQL_PASSWORD=${DBPASS}
    volumes:
      - /var/lib/mysql:/var/lib/mysql:rw
    networks:
      - mailcow-network

  redis-mailcow:
    image: redis:6.2
    container_name: redis-mailcow
    restart: always
    networks:
      - mailcow-network

  postfix-mailcow:
    image: mailcow/postfix:latest
    container_name: postfix-mailcow
    restart: always
    env_file:
      - mailcow.conf
    environment:
      - MASTER=1
    volumes:
      - /var/spool/postfix:/var/spool/postfix:rw
    networks:
      - mailcow-network
    ports:
      - "25:25"
      - "465:465"
      - "587:587"

  # ... (otros servicios necesarios)

networks:
  mailcow-network:
    driver: bridge
